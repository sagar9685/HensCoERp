/* --- Base Modal Styles --- */
.modalOverlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7); /* Darker overlay for focus */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 20px;
    font-family: 'Arial', sans-serif;
}

.modalContent {
    background: #FFFFFF;
    border-radius: 12px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.1);
    width: 95%;
    max-width: 900px;
    max-height: 95vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
}

/* --- Modal Header & Actions --- */
.modalHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 25px;
    background-color: #1A237E; /* Deep Navy Blue */
    color: #FFFFFF;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.modalHeader h2 {
    margin: 0;
    font-size: 1.4rem;
    font-weight: 600;
    display: flex;
    align-items: center;
}

.modalHeader svg {
    margin-right: 10px;
    color: #FFC107; /* Brand Accent Yellow */
}

.btnClose {
    background: none;
    border: none;
    color: #FFFFFF;
    font-size: 1.5rem;
    cursor: pointer;
    transition: color 0.2s;
}

.btnClose:hover {
    color: #FFC107;
}

.modalActions {
    padding: 15px 25px;
    background-color: #F9F9F9;
    border-top: 1px solid #EEEEEE;
    display: flex;
    justify-content: flex-end;
    gap: 15px;
}

.btn {
    padding: 10px 20px;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    border: 2px solid;
}

.btnDownload {
    background-color: #FFC107; /* Yellow Primary Action */
    color: #1A237E;
    border-color: #FFC107;
}

.btnDownload:hover {
    background-color: #f5b700;
    box-shadow: 0 4px 8px rgba(255, 193, 7, 0.3);
}

.btnPrint {
    background-color: #1A237E;
    color: #FFFFFF;
    border-color: #1A237E;
}

.btnPrint:hover {
    background-color: #273491;
    border-color: #273491;
}

.btnClose {
    color: #555555;
    border-color: #DDDDDD;
    background-color: #FFFFFF;
}

.btnClose:hover {
    color: #1A237E;
    border-color: #1A237E;
}

/* --- Invoice Wrapper & Body (Scrollable Area) --- */
.invoiceWrapper {
    overflow-y: auto;
    padding: 0 25px;
    background-color: #FFFFFF;
    flex-grow: 1;
}

.invoiceBody {
    margin: 0 auto;
    max-width: 850px; /* Constrain internal invoice size */
}

.invoiceContainer {
    padding: 20px 0;
    color: #333333;
    min-height: 842px; /* Approx A4 height for better PDF simulation */
}

/* --- 1. Header Section --- */
.header {
    border-bottom: 4px solid #FFC107; /* Bold brand line */
    padding-bottom: 10px;
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.companyInfo {
    display: flex;
    align-items: center;
    gap: 20px;
}

.logoContainer {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 12px;
    box-shadow: 
        0 4px 6px rgba(0, 0, 0, 0.1),
        0 1px 3px rgba(0, 0, 0, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.logoContainer:hover {
    transform: translateY(-2px);
    box-shadow: 
        0 8px 15px rgba(0, 0, 0, 0.1),
        0 3px 6px rgba(0, 0, 0, 0.08);
    background: linear-gradient(135deg, #ffffff 0%, #e4eaf7 100%);
}

.logoContainer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, #1A237E, #3949AB);
}

.logoImage {
    width: 60px;
    height: 60px;
    object-fit: contain;
    border: 3px solid #1A237E;
    border-radius: 8px;
    padding: 4px;
    background: white;
    filter: drop-shadow(0 2px 4px rgba(26, 35, 126, 0.2));
    transition: all 0.3s ease;
    position: relative;
    z-index: 1;
}

.brandInfo {
    line-height: 1.4;
}

.brandInfo strong {
    font-size: 1.3rem;
    color: #1A237E;
}

.companyDetails {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 20px;
    background: #ffffff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border-left: 4px solid #1A237E;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.companyDetails p {
    margin: 0;
    color: #333;
    font-size: 14px;
    line-height: 1.5;
    display: flex;
    align-items: center;
    gap: 8px;
}

.companyDetails p:first-child {
    font-size: 18px;
    color: #1A237E;
    margin-bottom: 4px;
}

.companyDetails p:first-child strong {
    font-weight: 600;
    color: #1A237E;
}

.companyDetails svg {
    color: #1A237E;
    width: 14px;
    height: 14px;
    flex-shrink: 0;
    opacity: 0.8;
}

.companyDetails p:nth-child(4) {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 4px;
    padding-top: 8px;
    border-top: 1px solid #eaeaea;
}

.companyDetails p:nth-child(4) strong {
    color: #1A237E;
    font-weight: 600;
    min-width: 50px;
}

.companyDetails p:nth-child(4) span {
    color: #666;
}

/* Alternative: Display GSTIN and PAN side by side */
.companyDetails p:nth-child(4) {
    display: grid;
    grid-template-columns: auto 1fr auto 1fr;
    gap: 8px 16px;
    align-items: center;
}

/* Hover effect for the entire container */
.companyDetails {
    transition: all 0.3s ease;
}

.companyDetails:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

/* Responsive design */
@media (max-width: 768px) {
    .companyDetails {
        padding: 16px;
        gap: 6px;
    }
    
    .companyDetails p {
        font-size: 13px;
    }
    
    .companyDetails p:first-child {
        font-size: 16px;
    }
    
    .companyDetails p:nth-child(4) {
        display: flex;
        flex-direction: column;
        gap: 4px;
        align-items: flex-start;
    }
    
    .companyDetails p:nth-child(4) strong {
        min-width: 45px;
    }
}

/* For very small screens */
@media (max-width: 480px) {
    .companyDetails {
        padding: 12px;
    }
    
    .companyDetails p {
        font-size: 12px;
    }
    
    .companyDetails p:first-child {
        font-size: 15px;
    }
}

.invoiceMeta {
    text-align: right;
    line-height: 1.4;
}

.invoiceMeta h1 {
    font-size: 1rem;
    color: #1A237E;
    margin: 0 0 10px 0;
    letter-spacing: 1px;
    font-weight: 800;
}

.invoiceDetails p {
    font-size: 0.9rem;
    margin: 2px 0;
}

.invoiceDetails strong {
    color: #1A237E;
}

/* --- 2. Customer & Order Details --- */
.customerDetails {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.detailBox {
    flex: 1;
    border: 1px solid #DDDDDD;
    padding: 15px;
    border-radius: 8px;
    background-color: #F9F9F9; /* Light background for detail boxes */
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.detailBox h3 {
    margin-top: 0;
    font-size: 1.1rem;
    color: #1A237E;
    border-bottom: 2px solid #FFC107;
    padding-bottom: 5px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.customerInfo, .orderInfo {
    font-size: 0.9rem;
    line-height: 1.6;
}

.customerName {
    font-size: 1.1rem;
    font-weight: 700;
    color: #333333;
    margin-bottom: 5px !important;
}

.customerInfo svg, .orderInfo svg {
    color: #1A237E;
    margin-right: 5px;
}

/* --- 3. Products Table --- */
.tableContainer {
    margin-bottom: 20px;
    border: 1px solid #DDDDDD;
    border-radius: 8px;
    overflow: hidden;
}

.productsTable {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
}

.productsTable thead {
    background-color: #1A237E;
    color: #FFFFFF;
}

.productsTable th {
    padding: 12px 10px;
    text-align: left;
    font-weight: 600;
    border: none;
}

.productsTable tbody tr {
    border-bottom: 1px solid #EEEEEE;
    transition: background-color 0.2s;
}

.productsTable tbody tr:nth-child(even) {
    background-color: #F9F9F9;
}

.productsTable tbody tr:hover {
    background-color: #FFFBEA; /* Light yellow hover for elegance */
}

.productsTable td {
    padding: 10px;
    vertical-align: top;
}

.productsTable td small {
    color: #666666;
    font-style: italic;
}

.textCenter {
    text-align: center;
}

.textRight {
    text-align: right;
}


/* --- 4. Footer Section (Grid Layout) --- */
.footerSection {
    display: flex;
    gap: 20px;
    margin-top: 20px;
}

.footerColumn {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* --- Amount in Words & Terms (Column 1) --- */
.amountInWords {
    border: 1px dashed #FFC107;
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 5px;
    background-color: #FFFBEA;
    font-size: 0.9rem;
}

.amountInWords span:first-child {
    font-weight: 700;
    color: #1A237E;
    display: flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 5px;
}

.amountInWords p {
    font-style: italic;
    font-weight: 600;
    color: #333;
    margin: 0;
}

.termsBox {
    flex-grow: 1;
    border: 1px solid #DDDDDD;
    padding: 10px;
    border-radius: 8px;
    font-size: 0.75rem;
    line-height: 1.5;
    background-color: #F9F9F9;
    overflow: hi;
}

.termsBox h4 {
    margin: 0 0 10px 0;
    font-size: 0.9rem;
    color: #1A237E;
    display: flex;
    align-items: center;
    gap: 5px;
    border-bottom: 1px solid #FFC107;
    padding-bottom: 3px;
}

.termsBox ul {
    margin: 0;
    padding-left: 15px;
    list-style-type: disc;
}

.termsBox li {
    margin-bottom: 5px;
}

.qrTermContainer {
    display: flex;
    align-items: center;
    margin-top: 10px;
    gap: 10px;
    padding-top: 5px;
    border-top: 1px solid #DDDDDD;
}

.qrSmall {
    width: 35px;
    height: 35px;
    border: 1px solid #1A237E;
}

.qrText p {
    margin: 0;
    font-size: 0.7rem;
    line-height: 1.2;
    color: #555555;
}


/* --- Payment Details (Column 2) --- */
.paymentInfo {
    border: 2px solid #1A237E; /* Strong border for importance */
    padding: 15px;
    border-radius: 8px;
    background-color: #FFFFFF;
    box-shadow: 0 0 10px rgba(26, 35, 126, 0.1);
}

.paymentInfo h4 {
    margin: 0 0 10px 0;
    font-size: 1.1rem;
    color: #FFC107;
    text-align: center;
    border-bottom: 2px solid #FFC107;
    padding-bottom: 5px;
}

.payQrBox {
    display: flex;
    gap: 15px;
    align-items: center;
    margin-bottom: 10px;
}

.qrPaymentImg {
    width: 100px;
    height: 100px;
    object-fit: contain;
    border: 2px solid #DDDDDD;
    padding: 5px;
}

.bankDetailsText p {
    margin: 2px 0;
    font-size: 0.85rem;
    line-height: 1.4;
    color: #555555;
}

.bankDetailsText strong {
    color: #1A237E;
    min-width: 80px;
    display: inline-block;
}

.noQrMessage {
    padding: 20px;
    text-align: center;
    border: 1px dashed #CC0000;
    border-radius: 5px;
    background-color: #FFEEEE;
}

.noQrMessage h4 {
    color: #CC0000;
    font-size: 1rem;
    border: none;
}

.paymentNote {
    margin-top: 10px;
    padding-top: 5px;
    border-top: 1px dashed #DDDDDD;
    font-size: 0.75rem;
    color: #666666;
    text-align: center;
}


/* --- Totals & Signature (Column 3) --- */
.totalsBox {
    border: 2px solid #1A237E;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    background-color: #F9F9F9;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
}

.totalRow {
    display: flex;
    justify-content: space-between;
    font-size: 1rem;
    margin-bottom: 8px;
    padding-bottom: 5px;
    border-bottom: 1px dashed #DDDDDD;
}

.totalRow span:first-child {
    font-weight: 500;
    color: #555555;
}

.totalRow span:last-child {
    font-weight: 600;
    color: #333333;
}

.grandTotalRow {
    display: flex;
    justify-content: space-between;
    font-size: 1.2rem;
    font-weight: 700;
    color: #1A237E;
    padding-top: 10px;
    border-top: 2px solid #FFC107; /* Highlight Grand Total */
    margin-top: 10px;
}

.signatureSection {
    text-align: center;
    padding: 10px;
    border: 1px solid #DDDDDD;
    border-radius: 8px;
    background-color: #FFFFFF;
}

.signatureContainer {
    position: relative;
    height: 80px;
    margin-bottom: 5px;
}

.signatureLine {
    position: absolute;
    bottom: 5px;
    left: 10%;
    right: 10%;
    height: 1px;
    background-color: #1A237E;
}

.signImg {
    max-width: 120px;
    max-height: 70px;
    object-fit: contain;
    position: absolute;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0.8;
}

.authText {
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.8rem;
    font-weight: 600;
    color: #1A237E;
    display: flex;
    align-items: center;
    gap: 5px;
}

.companyStamp {
    margin-top: 30px;
    font-size: 0.9rem;
    line-height: 1.2;
    color: #555555;
}

.companyStamp p {
    margin: 2px 0;
}

.companyStamp p:first-child {
    font-weight: 700;
    color: #1A237E;
}


/* --- 5. Footer Notes --- */
.footerNotes {
    margin-top: 20px;
    width: 100%;
}

.noteBox {
    background: #f8f9fa;
    border-left: 4px solid #1A237E;
    padding: 12px 16px;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.noteBox p {
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 14px;
    color: #333;
}

.noteBox strong {
    color: #1A237E;
}

/* Alternative with flexbox for better control */
.noteBox p {
    display: flex;
    align-items: center;
    margin: 0;
    gap: 8px;
    font-size: 14px;
    color: #333;
}

/* Or if you want it truly forced on one line without ellipsis */
.noteBox p {
    white-space: nowrap;
    overflow: visible;
    margin: 0;
    font-size: 14px;
    color: #333;
}

/* Responsive: show ellipsis on smaller screens */
@media (max-width: 768px) {
    .noteBox p {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
}
.pageInfo {
    text-align: right;
    flex-basis: 30%;
}


/* --- PDF Download Print Mode (Ensures White Background and Full View) --- */
@media print {
    /* Hide the modal overlay/actions in print mode */
    .modalOverlay, .modalActions {
        display: none !important;
    }
    
    /* Make the invoice container take over the full viewport/page */
    .invoiceWrapper {
        overflow: visible;
        padding: 0;
        margin: 0;
    }

    .invoiceContent, .invoiceBody {
        width: 100%;
        max-width: none;
    }

    /* Print mode adjustments for elements that might get cut off */
    .footerSection {
        page-break-inside: avoid;
    }

    /* Important: Ensure elements have white background for clean printing */
    * {
        background: transparent !important;
        box-shadow: none !important;
    }
    
    .invoiceContainer {
        border: none;
        padding: 0;
    }
    
    .productsTable thead {
        -webkit-print-color-adjust: exact;
        color-adjust: exact;
        background-color: #1A237E !important;
    }
}

/* This class is added temporarily for html2canvas to simulate print style */
.printMode {
    width: 210mm !important; 
    padding: 10mm !important;
    box-sizing: border-box !important;
    background-color: #FFFFFF !important;
    box-shadow: none !important;
    border-radius: 0 !important;
}